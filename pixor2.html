<!DOCTYPE html>

<html>
    <head>
      <!--  <script src="https://cdn.jsdelivr.net/npm/p5@1.3.0/lib/p5.js"></script>-->
    </head>

    <body>
        <center>
        <input id="inp" type="text"> <input id="butto" type="button" value="Art me up" onclick="start()"> <br> <br>
        <canvas id="main" width="160" height="160">    
        </canvas>
        <br>
        <!-- <a id="downloadLnk" download="pixor.png"> <input type="button" onclick="download()" value="Save Me!"/></a>-->
        <input type="button" value="Save Me!" onclick="saveImage()" >
        </center>
    </body>
</html>

<script>
    var seedFile;
    var colors = ["blue", "red","brown","white", "orange", "black", "yellow","green","indigo","violet","grey","pink"];
    var colors0 = ["#000000", "#fcfcfc", "#f8f8f8", "#bcbcbc", "#7c7c7c", "#a4e4fc", "#3cbcfc", "#0078f8", "#0000fc", "#b8b8f8", "#6888fc", "#0058f8", "#0000bc", "#d8b8f8", "#9878f8", "#6844fc", "#4428bc", "#f8b8f8", "#f878f8", "#d800cc", "#940084", "#f8a4c0", "#f85898", "#e40058", "#a80020", "#f0d0b0", "#f87858", "#f83800", "#a81000", "#fce0a8", "#fca044", "#e45c10", "#881400", "#f8d878", "#f8b800", "#ac7c00", "#503000", "#d8f878", "#b8f818", "#00b800", "#007800", "#b8f8b8", "#58d854", "#00a800", "#006800", "#b8f8d8", "#58f898", "#00a844", "#005800", "#00fcfc", "#00e8d8", "#008888", "#004058", "#f8d8f8", "#787878"];


    
    // Get the input field
    var inputVal = document.getElementById("inp");

    // Execute a function when the user releases a key on the keyboard
    inputVal.addEventListener("keyup", function(event) {
    
    // Number 13 is the "Enter" key on the keyboard
    if (event.keyCode === 13) {
        // Cancel the default action, if needed
        event.preventDefault();
        // Trigger the button element with a click
        document.getElementById("butto").click();
    }
    });

    function start(){
        seedIt();
        for(var x = 0; x<160; x+=10){
            for(var y = 0; y<160; y+=10){
                drawIt(x, y);
            }
        }
    }

    function saveImage() {
				var ua = window.navigator.userAgent;

				if (ua.indexOf("Chrome") > 0) {
					var canvas = document.getElementById("main");
                    var name = document.getElementById("inp");
					// save image as png
					var link = document.createElement('a');
    				link.download = name.value+".png";
    				link.href = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");;
    				link.click();
				}
				else {
					alert("Please use Chrome");
				}
			}
    function seedIt(seed){
        var inp = document.getElementById("inp");
        var seed = inp.value;
        if(seed == ""){
            seed = "Aaron";
        }
        seedFile =
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']],
        [['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x'],['x']];
        while(seed.length < 256){
            seed+=seed;
        }
        if(seed.length > 256){
            var dif = seed.length - 256;
            seed = seed.substring(0,(seed.length-dif));
        }
        var index = 0;
        for (var i = 0; i < 16; i++){
            for (var j = 0; j < 16; j++){
                seedFile[i][j] = seed[index];
                index++;
            }
        }
        console.log(seedFile);
        return seedFile;
    }

    function rando(salt_x, salt_y){
        seed = seedFile;
        // console.log("salt x =" + salt_x);
        // console.log("salt y =" + salt_y);
        // console.log("seed is " + seed);
        // console.log("seed length is " + seed.length);
        // console.log("the hash is " + hashy);
        // console.log("the char is " + seed[hashy]);
        // console.log("the code is " + seed[hashy].charCodeAt(0));
        console.log()
        return ((seed[Math.floor(salt_x/10)][Math.floor(salt_y/10)]).charCodeAt(0));
     };
/*
//     function download() {
    var dt = canvas.toDataURL('image/png');
    this.href = dt;
    var pix = document.getElementById("downloadLnk");
    pix.download = document.getElementById("inp").value + ".png";

    };
*/

    function drawIt(x, y){

    var c = document.getElementById("main");
    var con = c.getContext("2d");

    con.beginPath();
    con.rect(x, y, 10, 10);  
    con.fillStyle = colors[(rando((x+1), (y+1))%55)];
    con.fill();
    };



</script>